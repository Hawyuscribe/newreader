{% extends 'mcq/base.html' %}
{% load drive_filters %}

{% block content %}
<div class="container mt-5">
    <h1>Image Display Test</h1>
    
    <div class="card">
        <div class="card-body">
            <h5>MCQ ID: {{ mcq.id }}</h5>
            <p>Question: {{ mcq.question_text|truncatewords:10 }}</p>
            
            <h6>Image URL Debug:</h6>
            <ul>
                <li>URL: <code>{{ mcq.image_url }}</code></li>
                <li>URL exists: {% if mcq.image_url %}Yes{% else %}No{% endif %}</li>
                <li>URL length: {{ mcq.image_url|length }}</li>
            </ul>
            
            {% if mcq.image_url %}
                <h6>Image Display Test:</h6>
                
                {% if mcq.image_url|is_google_drive_url %}
                <div class="border p-3 mb-3 bg-info text-white">
                    <p><strong>Google Drive Image Detected</strong></p>
                    <p>Original URL: <code>{{ mcq.image_url }}</code></p>
                    <p>Preview URL: <code>{{ mcq.image_url|to_drive_preview_url }}</code></p>
                </div>
                
                <div class="border p-3 mb-3">
                    <p>Google Drive iframe:</p>
                    <iframe src="{{ mcq.image_url|to_drive_preview_url }}" 
                            style="border: 0; width: 100%; height: 400px;">
                    </iframe>
                </div>
                {% else %}
                <div class="border p-3 mb-3">
                    <p>Direct img tag:</p>
                    <img src="{{ mcq.image_url }}" alt="Test Image" style="max-width: 100%; max-height: 400px;">
                </div>
                {% endif %}
                
                <div class="border p-3 mb-3">
                    <p>Force iframe (all URLs):</p>
                    <iframe src="{{ mcq.image_url }}" 
                            style="border: 0; width: 100%; height: 400px;">
                    </iframe>
                </div>
            {% else %}
                <p class="text-danger">No image URL found for this MCQ.</p>
            {% endif %}
        </div>
    </div>
</div>

<script>
// Debug in console
console.log('MCQ Image URL:', '{{ mcq.image_url }}');
</script>
{% endblock %}